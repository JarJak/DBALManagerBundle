{"name":"DBALManagerBundle","tagline":"Bundle to integrate DBALManager with Symfony2","body":"DBALManagerBundle\r\n==================\r\n\r\n[![SensioLabsInsight](https://insight.sensiolabs.com/projects/26cdcbf9-dd47-452a-a933-f954ecd90d03/small.png)](https://insight.sensiolabs.com/projects/26cdcbf9-dd47-452a-a933-f954ecd90d03)\r\n\r\nThis bundle provides [DBALManager](http://jarjak.github.io/DBALManager/) as a Symfony 2 service.\r\n\r\nInstallation:\r\n------------\r\n\r\n1. Run:\r\n```composer require jarjak/dbal-manager-bundle```\r\n\r\n2. Add bundle to your AppKernel.php:\r\n\r\n```php\r\nclass AppKernel extends Kernel\r\n{\r\n    public function registerBundles()\r\n    {\r\n        $bundles = array(\r\n            //...\r\n            new JarJak\\DBALManagerBundle\\JarJakDBALManagerBundle(),\r\n        );\r\n        //...\r\n        return $bundles;\r\n    }\r\n    //...\r\n}\r\n```\r\n\r\nExample usage:\r\n--------------\r\n\r\nLets say we have user table with: \r\n- unique usernames and emails\r\n- column active can contain only 0 or 1 (not nullable)\r\n- column address can be null\r\n\r\n```php\r\n$sqlArray = [\r\n\t'username' => 'JohnKennedy',\r\n\t'email' => 'john@kennedy.gov'\r\n\t'password' => $password,\r\n\t'address' => '',\r\n\t'active' => 0,\r\n];\r\n\r\n$DBALManager = $this->get('jarjak.dbal_manager');\r\n$DBALManager->insertOrUpdateByArray('user', $sqlArray, 2, ['active']);\r\n```\r\n\r\nMultiple database connections\r\n-----------------------------\r\n\r\nIf you have more than one DB connection, then you can create multiple managers, one for each connection.\r\nAll you need is to pass DBAL Connection service to setConnection().\r\n\r\n```yaml\r\n    secondary_dbal_manager:\r\n        class: JarJak\\DBALManager\r\n        calls:\r\n            - [setConnection, [\"@secondary_connection\"]]\r\n```\r\n\r\nor:\r\n\r\n```php\r\n$secondaryDBALManager = new JarJak\\DBALManager();\r\n$secondaryDBALManager->setConnection($this->get('secondary_connection'));\r\n```\r\n\r\nDumping Queries\r\n---------------\r\n\r\nDBALManager can use VarDumper dump SQL Query from QueryBuilder ready to be copypasted into database server (with parameters already included).\r\n\r\n```php\r\n/* @var QueryBuilder $queryBuilder */\r\nJarJak\\DBALManager::dumpQuery($queryBuilder);\r\n```\r\n\r\nIf you don't use QueryBuilder you can still dump parametrized SQL with:\r\n\r\n```php\r\nJarJak\\DBALManager::dumpSql($sql, $params);\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}